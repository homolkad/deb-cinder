#!/bin/sh
set -e

. /usr/share/debconf/confmodule

NOVA_COM_DEF=/etc/default/nova-common

# Set the debconf value to whatever is in the config file
if [ -f ${NOVA_COM_DEF} ] ; then
    . ${NOVA_COM_DEF}
fi
if ! [ "${NOVA_ENABLE}" = "true" ] ; then
    NOVA_ENABLE=false
fi
db_set nova-common/start_services ${NOVA_ENABLE}

db_input low nova-common/start_services || true
db_go

# Write a default config file if it doesn't exist yet
# note that the value will be overwritten by the postinst
if ! [ -f ${NOVA_COM_DEF} ] ; then
    echo "# defaults file for nova daemons

# start nova daemons from init.d script?
#  only allowed values are \"true\" and \"false\"
NOVA_ENABLE=true" >${NOVA_COM_DEF}
fi

