#!/bin/sh

set -e

. /usr/share/debconf/confmodule
CINDER_COM_DEF=/etc/default/cinder-common
CINDER_CONF=/etc/cinder/cinder.conf

#PKGOS-INCLUDE#

manage_cinder_enable () {
	pkgos_read_config -sh ${CINDER_COM_DEF} CINDER_ENABLE cinder/start_services
	CINDER_ENABLE=${RET}
	if ! [ "${CINDER_ENABLE}" = "false" ] ; then
		CINDER_ENABLE=true
	fi
	# Write a default config file
	echo "# defaults file for cinder daemons

# start cinder daemons from init.d script?
#  only allowed values are \"true\" and \"false\"
CINDER_ENABLE=${CINDER_ENABLE}" >${CINDER_COM_DEF}	
}

pkgos_var_user_group cinder
manage_cinder_enable
pkgos_dbc_read_conf ${CINDER_CONF} cinder DEFAULT sql_connection $@

exit 0
